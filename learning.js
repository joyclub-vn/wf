(()=>{"use strict";const e=()=>{const{innerHeight:e,innerWidth:t}=window,{height:o,width:i}=screen;return(e||o)/(t||i)},t="https://uploads-ssl.webflow.com/649fb77ad1d9d9bbdbb2d8ec/658a76a5dd7c62ee2ca69803_Video-tertiary.svg",o="https://uploads-ssl.webflow.com/649fb77ad1d9d9bbdbb2d8ec/66338651709765e61727c509_Document-tertiary.svg";function i(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var r,s,a,l,c,d=(r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],s=function(){function e(t){var o=t.targetModal,n=t.triggers,r=void 0===n?[]:n,s=t.onShow,a=void 0===s?function(){}:s,l=t.onClose,c=void 0===l?function(){}:l,d=t.openTrigger,u=void 0===d?"data-micromodal-trigger":d,h=t.closeTrigger,m=void 0===h?"data-micromodal-close":h,f=t.openClass,g=void 0===f?"is-open":f,v=t.disableScroll,p=void 0!==v&&v,b=t.disableFocus,y=void 0!==b&&b,w=t.awaitCloseAnimation,k=void 0!==w&&w,E=t.awaitOpenAnimation,L=void 0!==E&&E,C=t.debugMode,T=void 0!==C&&C;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=document.getElementById(o),this.config={debugMode:T,disableScroll:p,openTrigger:u,closeTrigger:m,openClass:g,onShow:a,onClose:c,awaitCloseAnimation:k,awaitOpenAnimation:L,disableFocus:y},r.length>0&&this.registerTriggers.apply(this,i(r)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t;return(t=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];o.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",(function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()}),!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(r);return Array.apply(void 0,i(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&function(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}(),a=null,l=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},c=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var o in t)l(o);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),o=i(document.querySelectorAll("[".concat(t.openTrigger,"]"))),n=function(e,t){var o=[];return e.forEach((function(e){var i=e.attributes[t].value;void 0===o[i]&&(o[i]=[]),o[i].push(e)})),o}(o,t.openTrigger);if(!0!==t.debugMode||!1!==c(o,n))for(var r in n){var l=n[r];t.targetModal=r,t.triggers=i(l),a=new s(t)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===l(e)||(a&&a.removeEventListeners(),(a=new s(o)).showModal())},close:function(e){e?a.closeModalById(e):a.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=d);const u=d;var h=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};function m(e){try{return new URL(e),!0}catch(t){return console.error("Invalid URL:",e),!1}}function f(e){return h(this,void 0,void 0,(function*(){if(!m(e))throw new Error("Invalid URL provided");let t;switch(new URL(e).hostname){case"www.youtube.com":case"youtube.com":case"youtu.be":const o=yield fetch(`https://www.youtube.com/oembed?url=${e}&format=json`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);t=(yield o.json()).html;break;case"vimeo.com":const i=yield fetch(`https://vimeo.com/api/oembed.json?url=${e}`);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);t=(yield i.json()).html;break;default:t=`<iframe src='${e}?rel=0&controls=1&autoplay=0&mute=0&start=0' frameborder='0' allow='autoplay; encrypted-media' allowfullscreen=''></iframe>`}const o=(new DOMParser).parseFromString(t,"text/html").documentElement;return Object.assign(o.style,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",pointerEvents:"auto"}),o}))}class g{constructor(e,t){this.course_content=document.getElementById(t),this.outline_container=this.course_content.parentNode,this.config={headerClass:".course-outline-item-header",orderClass:".course-outline-item-order",titleClass:".course-outline-item-title",videoListClass:".video-item-list",videoItemClass:".video-item",videoNameClass:".video-name"},this.get_outline(e).then((e=>h(this,void 0,void 0,(function*(){if(this.render(e),this.init_first_lesson&&e.length>0){const t=document.getElementById("course-video-container");if(t){const o=e[0].lessons.find((e=>m(e.url)));o&&(t.innerHTML=(yield f(o.url)).outerHTML)}}})))).catch((e=>console.error("Error rendering outline:",e)))}get_outline(e){return new Promise(((t,o)=>{if(e.startsWith("/"))fetch(`https://ol.joyclub.com.vn${e}.json`,{method:"GET",cache:"force-cache"}).then((e=>e.json())).then(t).catch((e=>o(`Error fetching outline data: ${e}`)));else{const o=document.getElementById(e),i=o.querySelector("script").getAttribute("outline");o.remove(),t(JSON.parse(i))}}))}toggle_show(e){const t=e.parentNode,o=e.nextElementSibling;t.classList.toggle("show"),o.classList.toggle("show"),o.style.height=o.classList.contains("show")?o.scrollHeight+"px":"0"}renderVideo(e,i,n=!1){const r=e.querySelector(this.config.videoNameClass);r.classList.toggle("link-span",!1),r.classList.toggle("link-disabled",!0);const s=e.querySelector("img");if(r.innerText=i.title||"",s.src="application/pdf"===i.type?o:t,i.url&&m(i.url))if("application/pdf"===i.type){const t=e.querySelector(".video-length");t&&(t.style.display="none")}else n&&(r.classList.toggle("link-disabled",!1),r.classList.toggle("link-span",!0),e.addEventListener("click",(()=>{const e="video-preview-lesson";!function(e,t){h(this,void 0,void 0,(function*(){const o=yield f(t),i=document.querySelector(`#${e} .preview-lesson`);i&&(i.innerHTML=o.outerHTML)}))}(e,i.url),u.show(e,{onShow:e=>console.log(`Open ${i.url}`),disableScroll:!0,awaitOpenAnimation:!0})})))}render(e){e.forEach(((e,t)=>{const o=this.course_content.cloneNode(!0);o.removeAttribute("id");const i=o.querySelector(this.config.headerClass),n=i.querySelector(this.config.orderClass),r=i.querySelector(this.config.titleClass),s=i.querySelector(".course-outline-item-title-wrapper > .text-block");i.addEventListener("click",(()=>this.toggle_show(i))),n.innerText=(t+1).toString(),r.innerText=e.heading||"",s&&(s.innerText=e.description||"");const a=o.querySelector(this.config.videoListClass);e.lessons.forEach(((e,t)=>{const i=o.querySelector(this.config.videoItemClass).cloneNode(!0);this.renderVideo(i,e,e.preview),0===t&&(a.innerHTML=""),a.append(i)})),0===t&&(this.outline_container.innerHTML=""),this.outline_container.append(o)}))}}const v=t=>{const o=document.querySelector(".course-learning-main");o&&(e()>1.5?o.classList.add("sticky-on-top"):o.classList.remove("sticky-on-top"))};window.addEventListener("load",v),window.addEventListener("resize",v),window.CourseOutline=class extends g{constructor(e,t){super(e,t),this.config={headerClass:".course-outline-item-header-learning",orderClass:".course-outline-item-order-learning",titleClass:".course-learning-item-title",videoListClass:".video-item-list-learning",videoItemClass:".video-item-learning",videoNameClass:".video-name-learning"};const o=document.getElementById("course-intro");o?o.addEventListener("click",(()=>h(this,void 0,void 0,(function*(){const e=o.getAttribute("data-intro-link");if(e){const t=yield f(e);document.getElementById("course-video-container").innerHTML=t.outerHTML,document.querySelectorAll(".current").forEach((e=>e.classList.remove("current"))),o.classList.toggle("current")}})))):this.init_first_lesson=!0}renderVideo(i,n){const r=i.querySelector(this.config.videoNameClass),s=i.querySelector("img");r.innerText=n.title||"",s.src="application/pdf"===n.type?o:t;const a=n.url&&m(n.url);r.classList.toggle("link-disabled",!a),r.classList.toggle("link-span",a),a&&i.addEventListener("click",(function(){return h(this,void 0,void 0,(function*(){const t=n.type||"video";(()=>{let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e})()&&e()>=1.5&&(document.documentElement.scrollTop=0,document.body.scrollTop=0,"application/pdf"===t&&window.open(n.url));const o="application/pdf"===t?`<object data="${n.url}" type="application/pdf" width="100%" height="100%"></object>`:yield f(n.url);document.getElementById("course-video-container").innerHTML=o instanceof HTMLElement?o.outerHTML:o,document.querySelectorAll(".current").forEach((e=>e.classList.remove("current"))),this.classList.toggle("current")}))}))}}})();