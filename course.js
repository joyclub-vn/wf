(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,o){if(e){if("string"==typeof e)return t(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,o):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var o,n,i,r,s,a=(o=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],n=function(){function t(o){var n=o.targetModal,i=o.triggers,r=void 0===i?[]:i,s=o.onShow,a=void 0===s?function(){}:s,l=o.onClose,c=void 0===l?function(){}:l,d=o.openTrigger,u=void 0===d?"data-micromodal-trigger":d,h=o.closeTrigger,f=void 0===h?"data-micromodal-close":h,m=o.openClass,v=void 0===m?"is-open":m,g=o.disableScroll,p=void 0!==g&&g,y=o.disableFocus,w=void 0!==y&&y,b=o.awaitCloseAnimation,E=void 0!==b&&b,k=o.awaitOpenAnimation,L=void 0!==k&&k,S=o.debugMode,C=void 0!==S&&S;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=document.getElementById(n),this.config={debugMode:C,disableScroll:p,openTrigger:u,closeTrigger:f,openClass:v,onShow:a,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:L,disableFocus:w},r.length>0&&this.registerTriggers.apply(this,e(r)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var n;return(n=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];o.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",(function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()}),!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var t=this.modal.querySelectorAll(o);return Array.apply(void 0,e(t))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&function(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,n),t}(),i=null,r=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},s=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var o in t)r(o);return!0},{init:function(t){var o=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),r=e(document.querySelectorAll("[".concat(o.openTrigger,"]"))),a=function(e,t){var o=[];return e.forEach((function(e){var n=e.attributes[t].value;void 0===o[n]&&(o[n]=[]),o[n].push(e)})),o}(r,o.openTrigger);if(!0!==o.debugMode||!1!==s(r,a))for(var l in a){var c=a[l];o.targetModal=l,o.triggers=e(c),i=new n(o)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===r(e)||(i&&i.removeEventListeners(),(i=new n(o)).showModal())},close:function(e){e?i.closeModalById(e):i.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=a);const l=a;var c=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function d(e){try{return new URL(e),!0}catch(t){return console.error("Invalid URL:",e),!1}}function u(e){return c(this,void 0,void 0,(function*(){if(!d(e))throw new Error("Invalid URL provided");let t;switch(new URL(e).hostname){case"www.youtube.com":case"youtube.com":case"youtu.be":const o=yield fetch(`https://www.youtube.com/oembed?url=${e}&format=json`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);t=(yield o.json()).html;break;case"vimeo.com":const n=yield fetch(`https://vimeo.com/api/oembed.json?url=${e}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);t=(yield n.json()).html;break;default:t=`<iframe src='${e}?rel=0&controls=1&autoplay=0&mute=0&start=0' frameborder='0' allow='autoplay; encrypted-media' allowfullscreen=''></iframe>`}const o=(new DOMParser).parseFromString(t,"text/html").documentElement;return Object.assign(o.style,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",pointerEvents:"auto"}),o}))}window.Course=class{constructor(e,t){this.course_content=document.getElementById(t),this.outline_container=this.course_content.parentNode,this.config={headerClass:".course-outline-item-header",orderClass:".course-outline-item-order",titleClass:".course-outline-item-title",videoListClass:".video-item-list",videoItemClass:".video-item",videoNameClass:".video-name"},this.get_outline(e).then((e=>c(this,void 0,void 0,(function*(){if(this.render(e),this.init_first_lesson&&e.length>0){const t=document.getElementById("course-video-container");if(t){const o=e[0].lessons.find((e=>d(e.url)));o&&(t.innerHTML=(yield u(o.url)).outerHTML)}}})))).catch((e=>console.error("Error rendering outline:",e)))}get_outline(e){return new Promise(((t,o)=>{if(e.startsWith("/"))fetch(`https://ol.joyclub.com.vn${e}.json`,{method:"GET",cache:"force-cache"}).then((e=>e.json())).then(t).catch((e=>o(`Error fetching outline data: ${e}`)));else{const o=document.getElementById(e),n=o.querySelector("script").getAttribute("outline");o.remove(),t(JSON.parse(n))}}))}toggle_show(e){const t=e.parentNode,o=e.nextElementSibling;t.classList.toggle("show"),o.classList.toggle("show"),o.style.height=o.classList.contains("show")?o.scrollHeight+"px":"0"}renderVideo(e,t,o=!1){const n=e.querySelector(this.config.videoNameClass);n.classList.toggle("link-span",!1),n.classList.toggle("link-disabled",!0);const i=e.querySelector("img");if(n.innerText=t.title||"",i.src="application/pdf"===t.type?"https://uploads-ssl.webflow.com/649fb77ad1d9d9bbdbb2d8ec/66338651709765e61727c509_Document-tertiary.svg":"https://uploads-ssl.webflow.com/649fb77ad1d9d9bbdbb2d8ec/658a76a5dd7c62ee2ca69803_Video-tertiary.svg",t.url&&d(t.url))if("application/pdf"===t.type){const t=e.querySelector(".video-length");t&&(t.style.display="none")}else o&&(n.classList.toggle("link-disabled",!1),n.classList.toggle("link-span",!0),e.addEventListener("click",(()=>{const e="video-preview-lesson";!function(e,t){c(this,void 0,void 0,(function*(){const o=yield u(t),n=document.querySelector(`#${e} .preview-lesson`);n&&(n.innerHTML=o.outerHTML)}))}(e,t.url),l.show(e,{onShow:e=>console.log(`Open ${t.url}`),disableScroll:!0,awaitOpenAnimation:!0})})))}render(e){e.forEach(((e,t)=>{const o=this.course_content.cloneNode(!0);o.removeAttribute("id");const n=o.querySelector(this.config.headerClass),i=n.querySelector(this.config.orderClass),r=n.querySelector(this.config.titleClass),s=n.querySelector(".course-outline-item-title-wrapper > .text-block");n.addEventListener("click",(()=>this.toggle_show(n))),i.innerText=(t+1).toString(),r.innerText=e.heading||"",s&&(s.innerText=e.description||"");const a=o.querySelector(this.config.videoListClass);e.lessons.forEach(((e,t)=>{const n=o.querySelector(this.config.videoItemClass).cloneNode(!0);this.renderVideo(n,e,e.preview),0===t&&(a.innerHTML=""),a.append(n)})),0===t&&(this.outline_container.innerHTML=""),this.outline_container.append(o)}))}},document.addEventListener("DOMContentLoaded",(()=>{var e;window.innerWidth;const t=document.querySelector(".swiper.is-testimonial");if(!t)return;const o=new Swiper(t,{loop:!1,slidesPerView:1.2,spaceBetween:32,speed:600,pagination:{el:".external-swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:'[data-nav-function="next"]',prevEl:'[data-nav-function="previous"]'}});window.addEventListener("resize",(()=>{const e=window.innerWidth<=767?1:1.2;o.params.slidesPerView=e,o.update()}));const n=document.querySelector(".course-detail-title"),i=(null===(e=null==n?void 0:n.dataset.courseOrigin)||void 0===e?void 0:e.trim())||"",r=[];if(document.querySelectorAll(".swiper-slide.is-testimonial").forEach(((e,t)=>{var o;((null===(o=e.dataset.courseOrigin)||void 0===o?void 0:o.trim())||"")!==i&&r.unshift(t)})),r.forEach((e=>{o.removeSlide(e)})),o.update(),1===o.slides.length&&(o.params.slidesPerView=1,o.update()),0===o.slides.length){const e=document.querySelector(".section.testimonial");e&&e.remove()}}))})();